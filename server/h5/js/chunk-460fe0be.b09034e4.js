(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-460fe0be"],{"14dc":function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var n=r("822e"),o=r("26ca"),s=r("02c4"),i=r("3df0");function a(e,t,r){const n=new i["TransportError"](t,r);return n.originalError=e,n}function c(t,r){const n=e.alloc(t.length);for(let e=0;e<t.length;e++)n[e]=t[e]^r[e%r.length];return n}const u=e=>e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""),p=e=>e.replace(/-/g,"+").replace(/_/g,"/")+"==".substring(0,3*e.length%4);function d(t,r,o,i){const a=c(t,o),d=e.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),l={version:"U2F_V2",keyHandle:u(a.toString("base64")),challenge:u(d.toString("base64")),appId:location.origin};return Object(s["a"])("apdu","=> "+t.toString("hex")),Object(n["sign"])(l,r/1e3).then(t=>{const{signatureData:r}=t;if("string"===typeof r){const t=e.from(p(r),"base64");let n;return n=i?t.slice(5):t,Object(s["a"])("apdu","<= "+n.toString("hex")),n}throw t})}let l=[];function g(){l.forEach(e=>e.emit("disconnect")),l=[]}function f(e){return 5===e.metaData.code}class h extends o["a"]{static async open(e,t=5e3){return new h}constructor(){super(),this.scrambleKey=void 0,this.unwrap=!0,l.push(this)}async exchange(e){try{return await d(e,this.exchangeTimeout,this.scrambleKey,this.unwrap)}catch(t){const e="object"===typeof t.metaData;throw e?(f(t)&&g(),a(t,"Failed to sign with Ledger device: U2F "+t.metaData.type,"U2F_"+t.metaData.code)):t}}setScrambleKey(t){this.scrambleKey=e.from(t,"ascii")}setUnwrap(e){this.unwrap=e}close(){return Promise.resolve()}}h.isSupported=n["isSupported"],h.list=()=>Object(n["isSupported"])().then(e=>e?[null]:[]),h.listen=e=>{let t=!1;return Object(n["isSupported"])().then(r=>{t||(r?(e.next({type:"add",descriptor:null}),e.complete()):e.error(new i["TransportError"]("U2F browser support is needed for Ledger. Please use Chrome, Opera or Firefox with a U2F extension. Also make sure you're on an HTTPS connection","U2FNotSupported")))}),{unsubscribe:()=>{t=!0}}}}).call(this,r("b639").Buffer)},"4e71":function(e,t,r){"use strict";(function(t){e.exports=u;var n=r("b5fc"),o="undefined"!==typeof navigator&&!!navigator.userAgent,s=o&&navigator.userAgent.match(/Safari\//)&&!navigator.userAgent.match(/Chrome\//),i=o&&navigator.userAgent.match(/Edge\/1[2345]/),a=null;function c(e){return a||(a=new e((function(e,t){function r(){e({u2f:null,native:!0})}if(!o)return r();if(s)return r();var a="undefined"!==typeof window.u2f&&"function"===typeof window.u2f.sign;return a&&e({u2f:window.u2f,native:!0}),i?r():"http:"===location.protocol?r():"undefined"===typeof MessageChannel?r():void n.isSupported((function(t){t?e({u2f:n,native:!1}):r()}))}))),a}function u(e){return{isSupported:l.bind(e),ensureSupport:f.bind(e),register:h.bind(e),sign:m.bind(e),ErrorCodes:u.ErrorCodes,ErrorNames:u.ErrorNames}}function p(e,t){var r=null!=t?t.errorCode:1,n=u.ErrorNames[""+r],o=new Error(e);return o.metaData={type:n,code:r},o}function d(e,t){var r={};return r.promise=new e((function(e,n){r.resolve=e,r.reject=n,t.then(e,n)})),r.promise.cancel=function(t,n){c(e).then((function(e){n&&!e.native&&e.u2f.disconnect(),r.reject(p(t,{errorCode:-1}))}))},r}function l(){var e=this;return c(e).then((function(e){return!!e.u2f}))}function g(e){if(!e.u2f){if("http:"===location.protocol)throw new Error("U2F isn't supported over http, only https");throw new Error("U2F not supported")}}function f(){var e=this;return c(e).then(g)}function h(e,t,r){var n=this;return Array.isArray(e)||(e=[e]),"number"===typeof t&&"undefined"===typeof r&&(r=t,t=null),t||(t=[]),d(n,c(n).then((function(o){g(o);var s=o.native,i=o.u2f;return new n((function(n,o){function a(e){e.errorCode?o(p("Registration failed",e)):(delete e.errorCode,n(e))}function c(e,t){e?o(e):t.errorCode?o(p("Registration failed",t)):n(t)}if(s){var u=e[0].appId;i.register(u,e,t,a,r)}else i.register(e,t,c,r)}))}))).promise}function m(e,t){var r=this;return Array.isArray(e)||(e=[e]),d(r,c(r).then((function(n){g(n);var o=n.native,s=n.u2f;return new r((function(r,n){function i(e){e.errorCode?n(p("Sign failed",e)):(delete e.errorCode,r(e))}function a(e,t){e?n(e):t.errorCode?n(p("Sign failed",t)):r(t)}if(o){var c=e[0].appId,u=e[0].challenge;s.sign(c,u,e,i,t)}else s.sign(e,a,t)}))}))).promise}function v(e){u[e]=function(){if(!t.Promise)throw new Error("The platform doesn't natively support promises");var r=[].slice.call(arguments);return u(t.Promise)[e].apply(null,r)}}u.ErrorCodes={CANCELLED:-1,OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},u.ErrorNames={"-1":"CANCELLED",0:"OK",1:"OTHER_ERROR",2:"BAD_REQUEST",3:"CONFIGURATION_UNSUPPORTED",4:"DEVICE_INELIGIBLE",5:"TIMEOUT"},v("isSupported"),v("ensureSupport"),v("register"),v("sign")}).call(this,r("c8ba"))},"822e":function(e,t,r){"use strict";e.exports=r("4e71")},b32d:function(e,t,r){"use strict";var n=r("b466"),o=r.n(n);o.a},b466:function(e,t,r){var n=r("f9dd");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var o=r("499e").default;o("4f9f4918",n,!0,{sourceMap:!1,shadowMode:!1})},b5fc:function(e,t,r){"use strict";var n=n||{};e.exports=n,n.EXTENSION_ID="kmendfapggjehodndflmmgagdbamhnfd",n.MessageTypes={U2F_REGISTER_REQUEST:"u2f_register_request",U2F_SIGN_REQUEST:"u2f_sign_request",U2F_REGISTER_RESPONSE:"u2f_register_response",U2F_SIGN_RESPONSE:"u2f_sign_response"},n.ErrorCodes={OK:0,OTHER_ERROR:1,BAD_REQUEST:2,CONFIGURATION_UNSUPPORTED:3,DEVICE_INELIGIBLE:4,TIMEOUT:5},n.Request,n.Response,n.Error,n.SignRequest,n.SignResponse,n.RegisterRequest,n.RegisterResponse,n.disconnect=function(){n.port_&&n.port_.port_&&(n.port_.port_.disconnect(),n.port_=null)},n.getMessagePort=function(e){if("undefined"!=typeof chrome&&chrome.runtime){var t={type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:[]};chrome.runtime.sendMessage(n.EXTENSION_ID,t,(function(){chrome.runtime.lastError?n.getIframePort_(e):n.getChromeRuntimePort_(e)}))}else n.getIframePort_(e)},n.getChromeRuntimePort_=function(e){var t=chrome.runtime.connect(n.EXTENSION_ID,{includeTlsChannelId:!0});setTimeout((function(){e(null,new n.WrappedChromeRuntimePort_(t))}),0)},n.WrappedChromeRuntimePort_=function(e){this.port_=e},n.WrappedChromeRuntimePort_.prototype.postMessage=function(e){this.port_.postMessage(e)},n.WrappedChromeRuntimePort_.prototype.addEventListener=function(e,t){var r=e.toLowerCase();"message"==r||"onmessage"==r?this.port_.onMessage.addListener((function(e){t({data:e})})):console.error("WrappedChromeRuntimePort only supports onMessage")},n.getIframePort_=function(e){var t="chrome-extension://"+n.EXTENSION_ID,r=document.createElement("iframe");r.src=t+"/u2f-comms.html",r.setAttribute("style","display:none"),document.body.appendChild(r);var o=!1,s=new MessageChannel,i=function(t){"ready"==t.data?(s.port1.removeEventListener("message",i),o||(o=!0,e(null,s.port1))):console.error('First event on iframe port was not "ready"')};s.port1.addEventListener("message",i),s.port1.start(),r.addEventListener("load",(function(){r.contentWindow.postMessage("init",t,[s.port2])})),setTimeout((function(){o||(o=!0,e(new Error("IFrame extension not supported")))}),200)},n.EXTENSION_TIMEOUT_SEC=30,n.port_=null,n.waitingForPort_=[],n.reqCounter_=0,n.callbackMap_={},n.getPortSingleton_=function(e){n.port_?e(null,n.port_):(0==n.waitingForPort_.length&&n.getMessagePort((function(e,t){e||(n.port_=t,n.port_.addEventListener("message",n.responseHandler_));while(n.waitingForPort_.length)n.waitingForPort_.shift()(e,t)})),n.waitingForPort_.push(e))},n.responseHandler_=function(e){var t=e.data,r=t["requestId"];if(r&&n.callbackMap_[r]){var o=n.callbackMap_[r];delete n.callbackMap_[r],o(null,t["responseData"])}else console.error("Unknown or missing requestId in response.")},n.isSupported=function(e){n.getPortSingleton_((function(t,r){e(!t)}))},n.sign=function(e,t,r){n.getPortSingleton_((function(o,s){if(o)return t(o);var i=++n.reqCounter_;n.callbackMap_[i]=t;var a={type:n.MessageTypes.U2F_SIGN_REQUEST,signRequests:e,timeoutSeconds:"undefined"!==typeof r?r:n.EXTENSION_TIMEOUT_SEC,requestId:i};s.postMessage(a)}))},n.register=function(e,t,r,o){n.getPortSingleton_((function(s,i){if(s)return r(s);var a=++n.reqCounter_;n.callbackMap_[a]=r;var c={type:n.MessageTypes.U2F_REGISTER_REQUEST,signRequests:t,registerRequests:e,timeoutSeconds:"undefined"!==typeof o?o:n.EXTENSION_TIMEOUT_SEC,requestId:a};i.postMessage(c)}))}},b629:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cosmosLedger"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.transportChoice,expression:"transportChoice"}],attrs:{id:"webusb",type:"radio",value:"WebUSB"},domProps:{checked:e._q(e.transportChoice,"WebUSB")},on:{change:function(t){e.transportChoice="WebUSB"}}}),r("label",{attrs:{for:"webusb"}},[e._v("WebUSB")]),r("br"),r("button",{on:{click:e.getVersion}},[e._v(" Get Version ")]),r("button",{on:{click:e.showAddress}},[e._v(" Show Address ")]),r("button",{on:{click:e.signExampleTx}},[e._v(" Sign Example TX ")]),r("ul",{attrs:{id:"ledger-status"}},e._l(e.ledgerStatus,(function(t){return r("li",{key:t.index},[e._v(" "+e._s(t.msg)+" ")])})),0)])},o=[],s=(r("99af"),r("96cf"),r("1da1")),i=r("5435"),a=r("14dc"),c=r("e28a"),u=r.n(c),p={name:"CosmosLedger",props:{},data:function(){return{deviceLog:[],transportChoice:"U2F"}},computed:{ledgerStatus:function(){return this.deviceLog}},methods:{log:function(e){this.deviceLog.push({index:this.deviceLog.length,msg:e})},getTransport:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=null,this.log("Trying to connect via ".concat(this.transportChoice,"...")),"WebUSB"!==this.transportChoice){e.next=12;break}return e.prev=3,e.next=6,i["a"].create();case 6:t=e.sent,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),this.log(e.t0);case 12:if("U2F"!==this.transportChoice){e.next=22;break}return e.prev=13,e.next=16,a["a"].create(1e4);case 16:t=e.sent,e.next=22;break;case 19:e.prev=19,e.t1=e["catch"](13),this.log(e.t1);case 22:return e.abrupt("return",t);case 23:case"end":return e.stop()}}),e,this,[[3,9],[13,19]])})));function t(){return e.apply(this,arguments)}return t}(),getVersion:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.deviceLog=[],e.next=3,this.getTransport();case 3:return t=e.sent,r=new u.a(t),e.next=7,r.getVersion();case 7:if(n=e.sent,36864===n.return_code){e.next=11;break}return this.log("Error [".concat(n.return_code,"] ").concat(n.error_message)),e.abrupt("return");case 11:this.log("Response received!"),this.log("App Version ".concat(n.major,".").concat(n.minor,".").concat(n.patch)),this.log("Device Locked: ".concat(n.device_locked)),this.log("Test mode: ".concat(n.test_mode)),this.log("Full response:"),this.log(n);case 17:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),showAddress:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.deviceLog=[],e.next=3,this.getTransport();case 3:return t=e.sent,r=new u.a(t),this.log("Please click in the device"),n=[44,118,0,0,0],e.next=9,r.getAddressAndPubKey(n,"cosmos");case 9:if(o=e.sent,36864===o.return_code){e.next=13;break}return this.log("Error [".concat(o.return_code,"] ").concat(o.error_message)),e.abrupt("return");case 13:this.log("Response received!"),this.log("App Version ".concat(o.major,".").concat(o.minor,".").concat(o.patch)),this.log("Device Locked: ".concat(o.device_locked)),this.log("Test mode: ".concat(o.test_mode)),this.log("Full response:"),this.log(o);case 19:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),signExampleTx:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,r,n,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.deviceLog=[],e.next=3,this.getTransport();case 3:return t=e.sent,r=new u.a(t),n=[44,118,0,0,0],o='{"account_number":"6571","chain_id":"cosmoshub-2","fee":{"amount":[{"amount":"5000","denom":"uatom"}],"gas":"200000"},"memo":"Delegated with Ledger from union.market","msgs":[{"type":"cosmos-sdk/MsgDelegate","value":{"amount":{"amount":"1000000","denom":"uatom"},"delegator_address":"cosmos102hty0jv2s29lyc4u0tv97z9v298e24t3vwtpl","validator_address":"cosmosvaloper1grgelyng2v6v3t8z87wu3sxgt9m5s03xfytvz7"}}],"sequence":"0"}',e.next=9,r.sign(n,o);case 9:s=e.sent,this.log("Response received!"),this.log("App Version ".concat(s.major,".").concat(s.minor,".").concat(s.patch)),this.log("Device Locked: ".concat(s.device_locked)),this.log("Test mode: ".concat(s.test_mode)),this.log("Full response:"),this.log(s);case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},d=p,l=(r("b32d"),r("2877")),g=Object(l["a"])(d,n,o,!1,null,"6ba6c31b",null);t["default"]=g.exports},f9dd:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,"h3[data-v-6ba6c31b]{margin:40px 0 0}button[data-v-6ba6c31b]{padding:5px;font-size:medium}button[data-v-6ba6c31b],ul[data-v-6ba6c31b]{font-weight:700}ul[data-v-6ba6c31b]{padding:10px;text-align:left;alignment:left;list-style-type:none;background:#000;color:#adff2f}",""]),e.exports=t}}]);